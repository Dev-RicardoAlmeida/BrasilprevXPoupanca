<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Comparativo: Poupança vs. Brasilprev (Dezembro)</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />

  <style>
    body {
      background: #f7f9fb;
    }
    .page-header {
      margin: 2rem 0 1rem;
    }
    .money-input {
      font-size: 1.35rem;
      font-weight: 600;
      padding: 0.65rem 0.85rem;
    }
    .rate-badge {
      font-weight: 600;
      letter-spacing: 0.2px;
    }
    .stat-label {
      color: #6c757d;
      font-size: 0.9rem;
      margin-bottom: 0.15rem;
    }
    .stat-value {
      font-size: 1.25rem;
      font-weight: 700;
    }
    .card h5 {
      font-weight: 700;
    }
    .diff-positive { color: #15654a; }  /* verde escuro */
    .diff-negative { color: #b02a37; }  /* vermelho bootstrap-ish */
    .muted { color: #6c757d; }
    .note {
      font-size: 0.9rem;
      color: #6c757d;
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <header class="page-header">
      <h1 class="h3">Simulador de Rendimentos – Dezembro</h1>
      <p class="text-muted mb-0">Compare Poupança (0,67% a.m.) com Brasilprev (1,20% a.m.).</p>
    </header>

    <!-- Entrada -->
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <div class="mb-3">
          <label for="valorInput" class="form-label fw-semibold">
            Valor aplicado na Poupança em Dezembro
          </label>
          <input
            id="valorInput"
            type="text"
            class="form-control money-input"
            placeholder="R$ 0,00"
            inputmode="numeric"
            pattern="\d*"
            aria-describedby="valorHelp"
            autocomplete="off"
          />
          <div id="valorHelp" class="form-text">
            Digite apenas números. A digitação começa pelos centavos (ex.: 123 → R$ 1,23).
          </div>
        </div>
      </div>
    </div>

    <!-- Resultados -->
    <div class="row g-4">
      <!-- Poupança -->
      <div class="col-12 col-lg-6">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="card-title mb-0">Poupança</h5>
              <span class="badge text-bg-primary rate-badge">0,67% a.m.</span>
            </div>
            <hr />
            <div class="mb-3">
              <div class="stat-label">Rendimento no mês</div>
              <div id="poupancaRendimento" class="stat-value">R$ 0,00</div>
            </div>
            <div class="mb-2">
              <div class="stat-label">Total atualizado (aplicado + rendimento)</div>
              <div id="poupancaTotal" class="stat-value">R$ 0,00</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Brasilprev -->
      <div class="col-12 col-lg-6">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="card-title mb-0">Brasilprev</h5>
              <span class="badge text-bg-success rate-badge">1,20% a.m.</span>
            </div>
            <hr />
            <div class="mb-3">
              <div class="stat-label">Rendimento bruto (sobre o valor informado)</div>
              <div id="brasilprevBruto" class="stat-value">R$ 0,00</div>
              <div class="small text-muted">Taxa usada: 1,20% no mês.</div>
            </div>
            <div class="mb-3">
              <div class="stat-label">Rendimento líquido (após 15% de IR)</div>
              <div id="brasilprevLiquido" class="stat-value">R$ 0,00</div>
              <div class="small text-muted">Cálculo: rendimento bruto × 85%.</div>
            </div>
            <div class="mb-3">
              <div class="stat-label">Total com rendimento líquido</div>
              <div id="brasilprevTotal" class="stat-value">R$ 0,00</div>
            </div>
            <div class="mb-1">
              <div class="stat-label">Diferença do rendimento (Brasilprev líqu. − Poupança)</div>
              <div id="diferencaRend" class="stat-value muted">R$ 0,00</div>
              <div class="small text-muted">Comparação entre o rendimento líquido da Brasilprev e o rendimento da Poupança.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <p class="note mt-4">
      <strong>Observações:</strong> os cálculos são simplificados, usando taxas fixas para o mês de dezembro informadas no pedido.
      Não consideram dias úteis, TR, carências, taxas administrativas, come-cotas, nem particularidades contratuais/fiscais além do IR de 15% sobre o rendimento da Brasilprev.
	  
		Na comparação de Brasilprev foi considerado o fundo
        <a href="https://www1.brasilprev.com.br/rentabilidade/CLASSICO_VIII" target="_blank" rel="noreferrer">
          <strong>Brasilprev Clássico VIII</strong>
        </a>.

    </p>
  </div>

  <!-- Bootstrap JS (opcional) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>

  <script>
    (function () {
      // Configurações de taxas
      const TAXA_POUPANCA = 0.0067; // 0,67% a.m.
      const TAXA_BRASILPREV = 0.012; // 1,20% a.m.
      const IR_BRASILPREV = 0.15; // 15% sobre o rendimento

      // Formatação BRL
      const fmtBRL = new Intl.NumberFormat('pt-BR', {
        style: 'currency',
        currency: 'BRL',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
      });

      // Elementos
      const input = document.getElementById('valorInput');
      const poupancaRendimentoEl = document.getElementById('poupancaRendimento');
      const poupancaTotalEl = document.getElementById('poupancaTotal');
      const brasilprevBrutoEl = document.getElementById('brasilprevBruto');
      const brasilprevLiquidoEl = document.getElementById('brasilprevLiquido');
      const brasilprevTotalEl = document.getElementById('brasilprevTotal');
      const diferencaRendEl = document.getElementById('diferencaRend');

      // Utilitários
      const onlyDigits = (s) => (s || '').replace(/\D/g, '');
      const centsToNumber = (cents) => (cents || 0) / 100;

      function getPrincipalFromInput() {
        const digits = onlyDigits(input.value);
        const cents = digits ? parseInt(digits, 10) : 0;
        return centsToNumber(cents);
      }

      function formatInputAsMoney() {
        // Mantém apenas dígitos e formata como R$ ao atualizar o campo
        const digits = onlyDigits(input.value);
        const cents = digits ? parseInt(digits, 10) : 0;
        input.value = fmtBRL.format(cents / 100);
      }

      function updateDifferenceColor(value) {
        diferencaRendEl.classList.remove('diff-positive', 'diff-negative', 'muted');
        if (value > 0) {
          diferencaRendEl.classList.add('diff-positive');
        } else if (value < 0) {
          diferencaRendEl.classList.add('diff-negative');
        } else {
          diferencaRendEl.classList.add('muted');
        }
      }

      function recalcular() {
        const principal = getPrincipalFromInput();

        // Poupança
        const rendPoupanca = principal * TAXA_POUPANCA;
        const totalPoupanca = principal + rendPoupanca;

        // Brasilprev
        const rendBrasilprevBruto = principal * TAXA_BRASILPREV;
        const rendBrasilprevLiquido = rendBrasilprevBruto * (1 - IR_BRASILPREV);
        const totalBrasilprev = principal + rendBrasilprevLiquido;

        // Diferença (Brasilprev líquido - Poupança)
        const diff = rendBrasilprevLiquido - rendPoupanca;

        // Atualiza UI
        poupancaRendimentoEl.textContent = fmtBRL.format(rendPoupanca);
        poupancaTotalEl.textContent = fmtBRL.format(totalPoupanca);
        brasilprevBrutoEl.textContent = fmtBRL.format(rendBrasilprevBruto);
        brasilprevLiquidoEl.textContent = fmtBRL.format(rendBrasilprevLiquido);
        brasilprevTotalEl.textContent = fmtBRL.format(totalBrasilprev);
        diferencaRendEl.textContent = fmtBRL.format(diff);
        updateDifferenceColor(diff);
      }

      // Eventos do campo monetário (digitando pelos centavos)
      input.addEventListener('input', () => {
        formatInputAsMoney();
        recalcular();
      });

      // Ajusta o cursor ao final ao focar (experiência mais natural)
      input.addEventListener('focus', () => {
        setTimeout(() => {
          const val = input.value;
          input.value = '';
          input.value = val;
        }, 0);
      });

      // Inicializa com zero
      input.value = fmtBRL.format(0);
      recalcular();
    })();
  </script>
</body>
</html>